import os
from dotenv import load_dotenv

load_dotenv()

# Bot Configuration
BOT_TOKEN = os.getenv('BOT_TOKEN')
ADMIN_USER_ID = int(os.getenv('ADMIN_USER_ID', 0))
# Support channel/group chat ID (optional, for sending notifications to @PERS_coin_bot_support)
# For channels/groups, use format: -1001234567890 (negative number)
# Leave empty or 0 to use ADMIN_USER_ID instead
SUPPORT_CHAT_ID = int(os.getenv('SUPPORT_CHAT_ID', 0)) if os.getenv('SUPPORT_CHAT_ID') else None

# Database Configuration
# Use SQLite as fallback if PostgreSQL is not available
# For production, use PostgreSQL: postgresql://user:password@localhost:5432/balancebot
# For development/testing, SQLite will be used automatically if PostgreSQL fails
DATABASE_URL = os.getenv('DATABASE_URL', 'sqlite:///balancebot.db')

# Encryption Configuration
ENCRYPTION_KEY = os.getenv('ENCRYPTION_KEY', '').encode() if os.getenv('ENCRYPTION_KEY') else b'default_key_change_in_production_32bytes!!'

# Application Constants
PERS_TO_TOMAN = 1000  # 1 PERS = 1000 Toman = 10000 Rial
TRANSACTION_FEE_PERCENT = 0.001  # 0.1%
MAX_TRANSACTION_FEE = 50  # Maximum fee in PERS
SELL_FEE_PERCENT = 0.01  # 1% for selling
LOCK_DURATION_MINUTES = 10
MESSAGE_TIMEOUT_MINUTES = 5
MAX_RETRY_ATTEMPTS = 3
TRANSACTION_RETRY_TIMEOUT_SECONDS = 120  # 2 minutes

# Commitment Text
COMMITMENT_TEXT = """متن تعهدنامه و شرایط استفاده از سامانه

کاربر گرامی،
با تأیید این تعهدنامه، اقرار می‌نمایید که مفاد آن را با علم، آگاهی کامل و اراده آزاد مطالعه کرده و کلیه شرایط، تعهدات و محدودیت‌های مقرر را پذیرفته و متعهد به رعایت کامل آن در استفاده از سامانه می‌باشید.

ماده ۱ — تعاریف
سامانه: کلیه بسترها، زیرساخت‌ها، ربات تلگرامی، نرم‌افزارها و خدمات دیجیتال ارائه‌شده توسط شرکت.
کاربر: هر شخص حقیقی یا حقوقی استفاده‌کننده از سامانه پس از پذیرش این تعهدنامه.
شرکت: مالک و بهره‌بردار قانونی سامانه و ارائه‌دهنده خدمات فنی.

ماده ۲ — ماهیت سامانه
سامانه صرفاً یک بستر فنی و نرم‌افزاری برای مدیریت حساب‌ها، ثبت و جابجایی اعتبارات داخلی و ارائه خدمات دیجیتال مجاز بوده و بانک، مؤسسه مالی، اعتباری، صرافی، درگاه پرداخت یا ابزار سرمایه‌گذاری محسوب نمی‌گردد.

ماده ۳ — تعهدات کاربر و ممنوعیت‌ها
کاربر متعهد می‌گردد سامانه را صرفاً در چارچوب قوانین جمهوری اسلامی ایران استفاده نموده و از هرگونه استفاده غیرقانونی، از جمله موارد ذیل (به‌صورت غیرحصری) خودداری نماید:
• شرط‌بندی، قمار، بخت‌آزمایی و فعالیت‌های مبتنی بر شانس
• پول‌شویی، مخفی‌سازی منشأ دارایی، گردش صوری وجوه و عواید حاصل از جرم
• کلاهبرداری، فریب، جعل هویت، حساب صوری یا سوءاستفاده از اعتماد عمومی
• مواد مخدر، روان‌گردان، پیش‌سازهای شیمیایی و جرائم مرتبط
• قاچاق انسان، اعضای بدن، کودک‌آزاری، بهره‌کشی انسانی یا جنسی
• تولید، توزیع یا تبلیغ محتوای مستهجن، فحشا، اشاعه فساد و نقض عفت عمومی
• اخلال در نظم عمومی، اغتشاش، اقدامات ضدامنیتی یا همکاری با گروه‌های غیرقانونی
• تولید، خرید، فروش، حمل، نگهداری، واسطه‌گری یا تأمین مالی هرگونه سلاح، مهمات، مواد ناریه، تجهیزات نظامی، شبه‌نظامی یا انتظامی بدون مجوز
• افزایش خشونت، تهدید امنیت عمومی یا تضعیف امنیت کشور
• شبکه‌های هرمی، پانزی، جذب سرمایه غیرشفاف یا اخلال در نظام اقتصادی
• دور زدن مقررات مالیاتی، تجاری یا نظارتی
• انتقال اعتبار به‌نمایندگی از اشخاص ثالث بدون مجوز
• واگذاری، اجاره یا فروش حساب کاربری
• هرگونه استفاده سازمان‌یافته، واسطه‌ای یا شبکه‌ای برای اشخاص ثالث
• هر نوع استفاده‌ای که موجب مسئولیت کیفری، مدنی یا انتظامی گردد

تشخیص مصداق مجرمانه وفق نظر مراجع صالح بوده و کاربر حق استناد به جهل، ابهام یا برداشت شخصی را از خود سلب می‌نماید.

ماده ۴ — مسئولیت کامل اقدامات
کلیه مسئولیت‌های حقوقی، کیفری، مدنی و انتظامی ناشی از استفاده کاربر، منحصراً بر عهده وی بوده و شرکت هیچ مسئولیتی در قبال دعاوی، خسارات یا جرائم ناشی از عملکرد کاربر ندارد. کاربر متعهد است شرکت را در برابر هرگونه ادعا، خسارت یا هزینه دادرسی مصون و جبران نماید.

ماده ۵ — سلب مسئولیت شرکت
سامانه صرفاً بستر فنی است و هیچ‌گونه مداخله‌ای در روابط، توافقات یا فعالیت کاربران ندارد. کلیه اقدامات انجام‌شده از طریق حساب کاربری منتسب به شخص کاربر بوده و شرکت تعهدی به نظارت ماهوی یا تضمین مشروعیت فعالیت کاربران ندارد.

ماده ۶ — حق نظارت و اقدام
شرکت مجاز است در صورت تخلف یا ظن معقول، حساب کاربری را بدون اطلاع قبلی تعلیق یا مسدود نموده و در چارچوب قانون اطلاعات لازم را در اختیار مراجع ذی‌صلاح قرار دهد. مسدودسازی مانع پیگیری قانونی نخواهد بود.

ماده ۷ — امنیت حساب
حفظ محرمانگی اطلاعات، رمزها و دسترسی‌ها بر عهده کاربر بوده و هرگونه خسارت ناشی از سهل‌انگاری یا سوءاستفاده اشخاص ثالث متوجه شرکت نخواهد بود.

ماده ۸ — اصلاح تعهدنامه
شرکت حق اصلاح یا به‌روزرسانی تعهدنامه را داشته و ادامه استفاده از سامانه به‌منزله پذیرش نسخه جدید تلقی می‌گردد.

ماده ۹ — پذیرش نهایی
کاربر با تأیید این تعهدنامه اقرار می‌نماید کلیه مفاد را مطالعه، درک و پذیرفته، حق هرگونه ادعا علیه شرکت را سلب نموده و مسئولیت کامل اقدامات خود را می‌پذیرد. با انتخاب گزینه «می‌پذیرم»، فرآیند ایجاد حساب کاربری آغاز می‌گردد."""

